<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>(Feature) data - mloda docs</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "(Feature) data";
        var mkdocs_page_input_path = "in_depth/access-feature-data.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> mloda docs
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../..">mloda</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">mloda Concepts</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/mloda_basics/0_table_of_content/">Table of Content</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/mloda_basics/1_ml_mloda_intro/">Intro to the core interfaces of mloda</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/mloda_basics/2_ml_advantage_process_focus/">What makes mloda unique?</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/mloda_basics/3_ml_data_feature_feature_groups/">Data, Feature, FeatureSets and FeatureGroups in mloda</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/mloda_basics/4_ml_data_producers_user_owner/">Data Producer, User, Owner in mloda</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../chapter1/installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/sklearn_integration_basic/">mloda + scikit-learn Integration: Basic Example</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../chapter1/api-request/">API Request</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../chapter1/feature-groups/">Feature Groups</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../chapter1/compute-frameworks/">Compute Frameworks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../chapter1/extender/">Extender</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">In Depth - Basics</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../mloda-api/">mloda API</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">(Feature) data</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#dataaccesscollection-global-data-access">DataAccessCollection - global data access</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#global-scope-data-access">Global Scope Data Access</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#feature-scope-data-access">Feature Scope Data Access</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#apidata">ApiData</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#data-creator">Data Creator</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#input-features">Input features</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../join_data/">Join data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../filter_data/">Filter data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../artifacts/">Artifacts</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">In Depth - Advanced</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../data-quality/">Data quality</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../domain/">Domain concept</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../data-access-patterns/">Data Access Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Compute Frameworks</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../framework-transformers/">Framework Transformers</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../compute-framework-integration/">Compute Framework Integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../framework-connection-object/">Framework Connection Object</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Feature Groups</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../feature-chain-parser/">Feature Chain Parser</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../feature-group-matching/">Feature Group Matching</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../property-mapping/">PROPERTY_MAPPING</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../feature-group-testing/">Feature Group Testing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../feature-group-version/">Feature Group Versioning</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../multiple_result_columns/">Multiple Result Columns</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Plugin System</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../plugin-loader/">Plugin Loader</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Troubleshooting</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../troubleshooting/feature-group-resolution-errors/">Feature Group Resolution Errors</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../development/">Contributors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../license/">License - Apache 2.0</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../missing/">Missing</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Need Help?</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../faq/">FAQ</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../need-help/">Need Help</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">mloda docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">In Depth - Basics</li>
      <li class="breadcrumb-item active">(Feature) data</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="access-feature-data">Access (feature) data</h2>
<p>This framework provides several structured mechanisms for features to access and manage data, catering to diverse needs. Features can retrieve data through:</p>
<ul>
<li><strong>DataAccessCollection</strong> for global data loading management, </li>
<li><strong>Feature Scope Data Access</strong> for feature-specific data loading management, </li>
<li><strong>Api Data</strong> for using data directly with the mlodaAPI request.</li>
<li><strong>Data Creator</strong> for generating data instead of loading data,</li>
<li><strong>Input Features</strong> facilitates data sharing between features.</li>
</ul>
<p>These methods ensure efficient data management while maintaining flexibility and scalability. A typical scenario involves a complex feature relying on three input features. These input features, in turn, may depend on other input features or load data using ApiData.</p>
<blockquote>
<p><strong>Advanced</strong>: For a detailed explanation of the underlying data access patterns (BaseInputData vs MatchData), see <a href="../data-access-patterns/">Data Access Patterns</a>.</p>
</blockquote>
<h4 id="dataaccesscollection-global-data-access">DataAccessCollection - global data access</h4>
<p>The DataAccessCollection is designed to control the access to data of any kind. The main purpose of this class is to organize and simplify interactions with these different data elements, making it easier to work to ingest data of various form into the framework. It provides as an interface for accessing and storing of data on a global level.</p>
<p>The DataAccessCollection can only be added via <strong>mlodaAPI</strong>.</p>
<p>List options:</p>
<ol>
<li>
<p><strong>Files:</strong> Specifies the exact location of files: path/folder/text.txt</p>
</li>
<li>
<p><strong>Folders:</strong> Points to directories where files are located: path/folder/</p>
</li>
<li>
<p><strong>Credential dicts:</strong> Contains the necessary credentials to access data:<br />
 {host: example.com, password: example}</p>
</li>
<li>
<p><strong>Initialized connection object:</strong> Stores connection objects that are already initialized: (DBConnectionObject)</p>
</li>
<li>
<p><strong>Unitialized connection object:</strong> Stores not initialized connection objects: (UninitializedDBConnection)</p>
</li>
</ol>
<p>You can apply these options like so:</p>
<pre><code class="language-python">
data_access = DataAccessCollection()

# Add file paths, folder paths, credentials, and connection objects
data_access.add_file('path/to/folder/text.txt')
data_access.add_folder('path/to/folder/')
data_access.add_credential_dict({'host': 'example.com', 'password': 'example'})
data_access.add_initialized_connection_object('InitializedDBConnection')
data_access.add_uninitialized_connection_object('UninitializedDBConnection')

mlodaAPI.run_all(
    feature_list,
    data_access_collection=data_access)
</code></pre>
<h4 id="global-scope-data-access">Global Scope Data Access</h4>
<p>A concrete, simplified global scope data access is shown in this example:</p>
<pre><code class="language-python">import os

from mloda_core.abstract_plugins.components.data_access_collection import DataAccessCollection
from mloda_core.api.request import mlodaAPI


file_path = os.getcwd()
file_path += &quot;/docs/docs/in_depth&quot;

data_access_collection = DataAccessCollection(folders={str(file_path)})

result = mlodaAPI.run_all(
            [&quot;AExample&quot;, &quot;BExample&quot;], 
            compute_frameworks=[&quot;PandasDataframe&quot;], 
            # Define data access on a global level
            data_access_collection=data_access_collection
        )
print(result)
</code></pre>
<p>Output</p>
<pre><code class="language-python">[  AExample  BExample
0   Value1         2
1   Value2         3]
</code></pre>
<h4 id="feature-scope-data-access">Feature Scope Data Access</h4>
<p>The Feature Scope Data access is instead designed to control the access to data of any kind 
on a local level. </p>
<p>If data needs to be added specifically for a single feature (or features from the same feature group), you can use the feature_scope_data_access_name functionality.</p>
<p>We show the ReadFileFeature as example. It uses the input_data ReadFile. 
In this case, we need to provide the specific reader class: CsvReader.</p>
<pre><code class="language-python">
# This feature is already implemented as plug-in, so do not run it again. This will raise intentional errors.
class ReadFileFeature(AbstractFeatureGroup):
    @classmethod
    def input_data(cls) -&gt; Optional[BaseInputData]:
        return ReadFile()

    @classmethod
    def calculate_feature(cls, data: Any, features: FeatureSet) -&gt; Any:
        reader = cls.input_data()
        if reader is not None:
            data = reader.load(features)
            return data
        raise ValueError(f&quot;Reading file failed for feature {features.get_name_of_one_feature()}.&quot;)
</code></pre>
<p>As a side note, the ReadFileFeature was also used for the global scope automatism.</p>
<p>To use it, we can simply:</p>
<pre><code class="language-python">

from typing import Optional, Any, List
from pathlib import Path

from mloda_core.abstract_plugins.abstract_feature_group import AbstractFeatureGroup
from mloda_core.abstract_plugins.components.input_data.base_input_data import BaseInputData
from mloda_core.abstract_plugins.components.feature_set import FeatureSet
from mloda_plugins.feature_group.input_data.read_file import ReadFile
from mloda_core.abstract_plugins.components.feature import Feature
from mloda_plugins.feature_group.input_data.read_files.csv import CsvReader


file_path = os.getcwd()
file_path += &quot;/docs/docs/in_depth&quot;

feature_list: List[Feature | str] = []
feature_list.append(
    Feature(
        name=&quot;AExample&quot;,
        # Define data access on a feature level
        options={CsvReader.get_class_name(): file_path}),
)


result = mlodaAPI.run_all(feature_list, compute_frameworks=[&quot;PandasDataframe&quot;])
print(result)
</code></pre>
<p>Output</p>
<pre><code class="language-python">[  AExample
0   Value1
1   Value2]
</code></pre>
<p>Of course, we do not always want to load data during run. 
We might want to give data to the framework. 
For this purpose, we have the ApiData.</p>
<h4 id="apidata">ApiData</h4>
<p>The ApiData can read data given to mlodaAPI at request time.</p>
<p>Use cases:</p>
<ul>
<li>web requests</li>
<li>real-time prediction </li>
<li>features as parameters</li>
</ul>
<p>The following example shows a simple ApiData setup.</p>
<pre><code class="language-python">
from typing import List

from mloda_core.api.request import mlodaAPI
from mloda_plugins.compute_framework.base_implementations.pandas.dataframe import PandasDataframe
from mloda_core.abstract_plugins.components.input_data.api.api_input_data_collection import ApiInputDataCollection

# Setup the ApiInputDataCollection and api data.
# These 2 objects are needed to relate given data to the correct features.
api_input_data_collection = ApiInputDataCollection()
api_data = api_input_data_collection.setup_key_api_data(
    key_name=&quot;ExampleApiData&quot;, api_input_data={&quot;FeatureInputAPITest&quot;: [&quot;TestValue3&quot;, &quot;TestValue4&quot;]}
)

result = mlodaAPI.run_all(
        [&quot;FeatureInputAPITest&quot;],
        compute_frameworks={PandasDataframe},
        api_input_data_collection=api_input_data_collection,
        api_data=api_data,
)
for res in result:
    print(res)
</code></pre>
<p>Output:</p>
<pre><code class="language-python">  FeatureInputAPITest
0          TestValue3
1          TestValue4
</code></pre>
<p>Further, we do not want to always load data from outside, be it before or during the framework run, but we want to be able to create Data. For this purpose, we have the Data Creator.</p>
<h4 id="data-creator">Data Creator</h4>
<p>The data creator can create data independent of any other dependency. It is essentially a base feature that does not need a <strong>DataAccessCollection</strong> or <strong>Feature Scope Data Access</strong>.</p>
<p>Usage:</p>
<ul>
<li>test data,</li>
<li>sample data,</li>
<li>dummy data,</li>
<li>parameter data</li>
</ul>
<p>One could imagine that for experimenting one wants to see data. Then one could use this feature as input feature to another feature instead of e.g. the true data.</p>
<pre><code class="language-python">

from mloda_plugins.compute_framework.base_implementations.pandas.dataframe import PandasDataframe
from mloda_core.abstract_plugins.components.input_data.creator.data_creator import DataCreator

# Create a Creator FeatureGroup class, which delivers the data needed
class AFeatureInputCreator(AbstractFeatureGroup):

    # Define input_data with using DataCreator
    @classmethod
    def input_data(cls) -&gt; Optional[BaseInputData]:
        return DataCreator({&quot;AFeatureInputCreator&quot;})

    # Define the data this feature creates
    @classmethod
    def calculate_feature(cls, data: Any, features: FeatureSet) -&gt; Any:
        return {&quot;AFeatureInputCreator&quot;: [&quot;TestValue5&quot;, &quot;TestValue6&quot;]}

result = mlodaAPI.run_all(
        [&quot;AFeatureInputCreator&quot;],
        compute_frameworks={PandasDataframe},
)
for res in result:
     print(res)
</code></pre>
<p>Output</p>
<pre><code class="language-python">  AFeatureInputCreator
0          TestValue5
1          TestValue6
</code></pre>
<p>Finally, as also the most important way to get data, is actually to depent on data inside the framework already. For this purpose, a feature can load data depending on other features.</p>
<h4 id="input-features">Input features</h4>
<p>The input_features method allows a feature to access data from other features. This enables data sharing and collaboration between different components of your system.</p>
<p>This is one of the key aspects in how we achieve to split data from processes. </p>
<p>In the following example, we will use data from another feature.</p>
<pre><code class="language-python">
from typing import Set

from mloda_core.abstract_plugins.components.options import Options
from mloda_core.abstract_plugins.components.feature_name import FeatureName
from mloda_core.abstract_plugins.components.plugin_option.plugin_collector import PlugInCollector

# Set this variable as convention
_mloda_source = &quot;mloda_source&quot;


# First, we create a class, which uses input features from another class
class AInputFeatureGroup(AbstractFeatureGroup):

    def input_features(self, options: Options, feature_name: FeatureName) -&gt; Optional[Set[Feature]]:

        # We use the source to make this feature flexible.
        # One could give here different feature names via the configuration.
        mloda_source = options.get(_mloda_source)
        if mloda_source is None:
            raise ValueError(f&quot;Option '{_mloda_source}' is required.&quot;)

        features = set()
        for source in mloda_source:
            features.add(Feature(name=source,                # source in this example is &lt;AFeatureInputCreator&gt;
                                 initial_requested_data=True # To see this feature also in the output, we can set this var to true.
                                 )
            )
        return features

    @classmethod
    def calculate_feature(cls, data: Any, features: FeatureSet) -&gt; Any:
        data[&quot;AInputFeatureGroup&quot;] = len(data)
        return data


feature_list = []
feature_list.append(
    Feature(name=&quot;AInputFeatureGroup&quot;, options={_mloda_source: frozenset([&quot;AFeatureInputCreator&quot;])})
)

result = mlodaAPI.run_all(
    feature_list,
    compute_frameworks={PandasDataframe},
    plugin_collector=PlugInCollector.enabled_feature_groups({AInputFeatureGroup, AFeatureInputCreator})

)
print(result)
</code></pre>
<p>Output:</p>
<pre><code class="language-python">[AFeatureInputCreator
0           TestValue5
1           TestValue6,    
AInputFeatureGroup
0                   2
1                   2]
.......
</code></pre>
<p>As the input features can be fulfilled by <strong>multiple other features</strong>, we can have the same processes running in different environments, migrations and processes.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../mloda-api/" class="btn btn-neutral float-left" title="mloda API"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../join_data/" class="btn btn-neutral float-right" title="Join data">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../mloda-api/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../join_data/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>

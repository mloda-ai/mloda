<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Artifacts - mloda docs</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Artifacts";
        var mkdocs_page_input_path = "in_depth/artifacts.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> mloda docs
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Home</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../..">mloda</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">mloda Concepts</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/mloda_basics/0_table_of_content/">Table of Content</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/mloda_basics/1_ml_mloda_intro/">Intro to the core interfaces of mloda</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/mloda_basics/2_ml_advantage_process_focus/">What makes mloda unique?</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/mloda_basics/3_ml_data_feature_feature_groups/">Data, Feature, FeatureSets and FeatureGroups in mloda</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/mloda_basics/4_ml_data_providers_user_steward/">Provider, User, Steward in mloda</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../chapter1/installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/sklearn_integration_basic/">mloda + scikit-learn Integration: Basic Example</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../chapter1/api-request/">API Request</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../chapter1/feature-groups/">Feature Groups</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../chapter1/compute-frameworks/">Compute Frameworks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../chapter1/extender/">Extender</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">In Depth - Basics</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../mloda-api/">mloda API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../access-feature-data/">(Feature) data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../join_data/">Join data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../filter_data/">Filter data</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Artifacts</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#key-components">Key Components</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#baseartifact">BaseArtifact</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#featuregroup">FeatureGroup</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example">Example</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#feature-group-with-artifact-implementation">Feature Group with Artifact implementation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#testing-artifacts">Testing Artifacts</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#complex-artifact-example-sklearnartifact">Complex Artifact Example: SklearnArtifact</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#conclusion">Conclusion</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">In Depth - Advanced</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../data-quality/">Data quality</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../domain/">Domain concept</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../data-access-patterns/">Data Access Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Compute Frameworks</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../framework-transformers/">Framework Transformers</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../compute-framework-integration/">Compute Framework Integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../framework-connection-object/">Framework Connection Object</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Feature Groups</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../feature-config/">Feature Configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../feature-chain-parser/">Feature Chain Parser</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../feature-group-matching/">Feature Group Matching</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../property-mapping/">PROPERTY_MAPPING</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../feature-group-testing/">Feature Group Testing</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../feature-group-version/">Feature Group Versioning</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../multiple_result_columns/">Multiple Result Columns</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Plugin System</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../discover-plugins/">Discover Plugins</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../plugin-loader/">Plugin Loader</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Troubleshooting</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../troubleshooting/feature-group-resolution-errors/">Feature Group Resolution Errors</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Development</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../development/">Contributors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../license/">License - Apache 2.0</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Need Help?</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../faq/">FAQ</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../need-help/">Need Help</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">mloda docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">In Depth - Basics</li>
      <li class="breadcrumb-item active">Artifacts</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="artifacts">Artifacts</h1>
<p>Artifacts are a crucial part of the mloda, enabling the storage and retrieval of intermediate results feature engineering processes.
Example use cases are embeddings, Feature Matrices, Model Checkpoints and more.</p>
<h2 id="overview">Overview</h2>
<p>Artifacts are managed through a set of abstract and concrete classes that define how artifacts are created, saved, and loaded. The primary classes involved in artifact management include:</p>
<ul>
<li><code>BaseArtifact</code>: The base class for all artifacts.</li>
<li><code>FeatureGroup</code>: The base class for feature groups, including methods for artifact management. This class may contain a <code>BaseArtfact</code>.</li>
</ul>
<h2 id="key-components">Key Components</h2>
<h4 id="baseartifact">BaseArtifact</h4>
<p>The <code>BaseArtifact</code> class serves as the foundation for all artifacts. It provides the basic interface and functionality required for artifact management.</p>
<h4 id="featuregroup">FeatureGroup</h4>
<p>The <code>FeatureGroup</code> class defines the structure for feature groups, including methods for creating data, calculating features, and managing artifacts. It includes methods such as <code>artifact</code> and <code>load_artifact</code> to handle artifact operations.</p>
<h2 id="example">Example</h2>
<h4 id="feature-group-with-artifact-implementation">Feature Group with Artifact implementation</h4>
<p>The following example demonstrates how to implement and test an artifact.</p>
<p>Here, we create a <code>FeatureGroup</code> with a configured <code>BaseArtifact</code>.</p>
<pre><code class="language-python">from typing import Type, Any, Optional
from mloda.provider import FeatureGroup, FeatureSet, BaseArtifact, DataCreator, BaseInputData


class BaseExampleArtifactFeature(FeatureGroup):
    @classmethod
    def input_data(cls) -&gt; Optional[BaseInputData]:
        return DataCreator({cls.get_class_name()})

    @staticmethod
    def artifact() -&gt; Type[BaseArtifact] | None:
        return BaseArtifact

    @classmethod
    def calculate_feature(cls, data: Any, features: FeatureSet) -&gt; Any:
        if features.artifact_to_save:
            features.save_artifact = &quot;BasicArtifact&quot;

        if features.artifact_to_load:
            result = cls.load_artifact(features)
            print(f&quot;{result} is the loaded artifact.&quot;)

        return {cls.get_class_name(): [1, 2, 3]}
</code></pre>
<p>Now, we run the query to the feature group to save the artifact. This example is very basic, but could be a much more complex artifact.</p>
<pre><code class="language-python">from mloda.user import mloda
from mloda_plugins.compute_framework.base_implementations.pyarrow.table import PyArrowTable

api = mloda([&quot;BaseExampleArtifactFeature&quot;], {PyArrowTable})
api._batch_run()
artifacts = api.get_artifacts()
print(artifacts)
</code></pre>
<p>Result:</p>
<pre><code class="language-python">{'BaseExampleArtifactFeature': 'BasicArtifact'}
</code></pre>
<p>Now, let us use this artifact.</p>
<pre><code class="language-python">from mloda.user import Feature, mloda

feat = Feature(name=&quot;BaseExampleArtifactFeature&quot;, options=artifacts)
api = mloda([feat], {PyArrowTable})
api._batch_run()
</code></pre>
<p>Result:</p>
<pre><code class="language-python">&quot;BasicArtifact is the loaded artifact.&quot;
</code></pre>
<h4 id="testing-artifacts">Testing Artifacts</h4>
<p>Testing artifact features involves creating test cases that ensure artifacts are correctly saved and loaded. The following example shows how to test the <code>BaseTestArtifactFeature</code> class.</p>
<p><a href="https://github.com/mloda-ai/mloda/blob/main/tests/test_core/test_artifacts/test_artifacts.py">View the test file on GitHub</a></p>
<h4 id="complex-artifact-example-sklearnartifact">Complex Artifact Example: SklearnArtifact</h4>
<p>For more advanced use cases, artifacts can handle complex data structures and multiple objects. The <code>SklearnArtifact</code> demonstrates this with fitted scikit-learn transformers:</p>
<pre><code class="language-python">from mloda_plugins.feature_group.experimental.sklearn.sklearn_artifact import SklearnArtifact

class MySklearnFeatureGroup(FeatureGroup):
    @staticmethod
    def artifact() -&gt; Type[BaseArtifact] | None:
        return SklearnArtifact

    @classmethod
    def calculate_feature(cls, data: Any, features: FeatureSet) -&gt; Any:
        # Save multiple artifacts with unique keys
        if features.artifact_to_save:
            SklearnArtifact.save_sklearn_artifact(
                features, 
                &quot;my_transformer&quot;, 
                {&quot;fitted_transformer&quot;: fitted_model, &quot;feature_names&quot;: [&quot;col1&quot;, &quot;col2&quot;]}
            )

        # Load specific artifact by key
        if features.artifact_to_load:
            artifact_data = SklearnArtifact.load_sklearn_artifact(features, &quot;my_transformer&quot;)
            fitted_model = artifact_data[&quot;fitted_transformer&quot;]
</code></pre>
<p>This pattern supports file-based storage, multiple artifact management, and complex serialization.</p>
<h4 id="conclusion">Conclusion</h4>
<p>Artifacts are a powerful feature in mloda, enabling efficient management of intermediate results in the machine learning pipeline. By understanding and utilizing the provided classes and methods, you can effectively manage artifacts in your projects.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../filter_data/" class="btn btn-neutral float-left" title="Filter data"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../data-quality/" class="btn btn-neutral float-right" title="Data quality">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../filter_data/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../data-quality/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
